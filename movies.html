<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies | Binge</title>

    <link rel="stylesheet" href="binge.css">

    <!-- QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- HTML to Image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

<header class="navbar">
    <div class="logo">BINGE</div>
    <nav>
        <a href="movies.html">Movies</a>
        <a href="theaters.html">Theaters</a>
        <a href="contact.html">Contact</a>
        <a href="#" onclick="logout()">Logout</a>
    </nav>
</header>

<section class="hero">
    <h1>Unlimited Movies, Seamless Booking</h1><br>
    <h3>Choose your movie · Select seats · Enjoy the show</h3>
    <br><button class="hero-btn"
        onclick="document.getElementById('movies').scrollIntoView({behavior:'smooth'})">
        Browse Movies
    </button>
</section>

<section id="movies">
    <h2 class="section-title">Available now</h2>

    <div class="movies-container">

        <div class="movie-card">
            <img src="https://i.pinimg.com/736x/94/6b/3c/946b3c17f5b06a6418d03c92288318da.jpg">
            <h3>Kantara</h3>
            <button onclick="bookSeat('Kantara')">Book Seats</button>
        </div>

        <div class="movie-card">
            <img src="https://filmfare.wwmindia.com/content/2022/dec/pathaan11669878737.jpg">
            <h3>Pathaan</h3>
            <button onclick="bookSeat('Pathaan')">Book Seats</button>
        </div>
        
        <div class="movie-card">
             <div class="poster">
                <img src="https://tse2.mm.bing.net/th/id/OIP.1WuGzMZMkw24rDSInkV7RgHaJQ?pid=Api&P=0&h=180">
                <h3>Jawaan</h3>
            </div>
            <button onclick="bookSeat('Jawaan')">Book Seats</button>
        </div>
        <div class="movie-card">
             <div class="poster">
                <img src="https://mlpnk72yciwc.i.optimole.com/cqhiHLc.IIZS~2ef73/w:auto/h:auto/q:75/https://bleedingcool.com/wp-content/uploads/2022/08/AVATAR_RERLS_1SHT_DIGITAL_sRGB_V7.jpg">
                <h3>Avatar</h3>
            </div>
            <button onclick="bookSeat('Avatar')">Book Seats</button>
        </div>
        <div class="movie-card">
             <div class="poster">
                <img src="https://image.tmdb.org/t/p/original/nfnhwfUEFuSOxxf4jDdBlY6Lccw.jpg">
                <h3>Stree 2</h3>
            </div>
            <button onclick="bookSeat('Stree 2')">Book Seats</button>
        </div>
        <div class="movie-card">
             <div class="poster">
                <img src="https://juksun.com/wp-content/uploads/2025/05/War-2-Movie-Poster-768x1069.jpg">
                <h3>WAR 2</h3>
            </div>
            <button onclick="bookSeat('WAR 2')">Book Seats</button>
        </div>
        <div class="movie-card">
             <div class="poster">
                <img src="https://images.filmibeat.com/img/popcorn/movie_posters/mark-20250902094131-22084.jpg">
                <h3>Mark</h3>
            </div>
            <button onclick="bookSeat('Mark')">Book Seats</button>
        </div>

    </div>
</section>

<!-- SEAT MODAL -->
<div id="seatModal" class="modal">
    <div class="modal-content">
        <h3 id="movieTitle"></h3>
        <div id="seatsGrid" class="seats-grid"></div>
        <button onclick="confirmBooking()">Confirm Booking</button>
        <button onclick="closeModal()">Close</button>
    </div>
</div>

<!-- TICKET + QR MODAL -->
<div id="qrModal" class="modal">
    <div class="modal-content" id="ticket">
        <h3>Your Booking Ticket</h3>

        <div id="qrcode"></div>

        <pre id="ticketText"></pre>

        <button onclick="downloadTicket()">Download Ticket</button>
        <button onclick="closeQR()">Close</button>
    </div>
</div>

<footer class="site-footer">
    © 2026 Binge. Academic Project Only.
</footer>

<script src="binge.js"></script>

<script>
    // Auto-scroll + auto-open booking from theaters page
    const params = new URLSearchParams(window.location.search);
    const movie = params.get("movie");
    const theater = params.get("theater");
    const scroll = params.get("scroll");

    if (scroll === "true") {
        setTimeout(() => {
            document.getElementById("movies")
                ?.scrollIntoView({ behavior: "smooth" });
        }, 400);
    }

    if (movie && theater) {
        setTimeout(() => {
            bookSeat(movie + " @ " + theater);
        }, 700);
    }
</script>

</body>
</html>
